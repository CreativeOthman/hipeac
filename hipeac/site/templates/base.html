{% load compress %}
{% load staticfiles %}


<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#" data-rev="{{ GIT_REV }}" data-csrf-token="{{ csrf_token }}" data-user="{{ user.id | default:"0" }}">
    <head>
        <link href="//fonts.googleapis.com/css?family=Material+Icons" type="text/css" rel="stylesheet">
        {% compress css file bootstrap %}
            <link href="{% static 'vendor/bootstrap@4.1.3/bootstrap.min.css' %}" type="text/css" rel="stylesheet">
            <link href="{% static 'scss/base.scss' %}" type="text/x-scss" rel="stylesheet">
        {% endcompress %}
        {% block styles %}{% endblock %}
        <title>{% block head_title %}HiPEAC{% endblock %}</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta property="og:site_name" content="HiPEAC">
        <meta property="og:url" content="{{ request.build_absolute_uri }}">
        <meta property="fb:app_id" content="207028983222704">
        <meta name="twitter:site" content="@hipeac">
        {% block structured_data %}{% endblock %}
        {% if not debug %}
            <link href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" type="text/css" rel="stylesheet">
            <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
            {% compress js inline %}
                <script>
                    window.addEventListener('load', function() {
                        window.cookieconsent.initialise({
                            'palette': {
                                'popup': {
                                    'background': '#252e39'
                                },
                                'button': {
                                    'background': '#14a7d0'
                                }
                            },
                            'theme': 'classic'
                        });
                    });
                </script>
            {% endcompress %}
            {% if not request.DNT %}
                <script async src="//cdn.goroost.com/roostjs/a253e21fb2404e8184943edd0bc67680"></script>
                <script async src="//www.googletagmanager.com/gtag/js?id=UA-79856831-1"></script>
                {% compress js inline %}
                    <script>
                        window.dataLayer = window.dataLayer || [];
                        function gtag() {
                            dataLayer.push(arguments);
                        }
                        gtag('js', new Date());
                        gtag('config', 'UA-2857653-1', {
                            'user_id': {% if user.is_authenticated %} '{{ user.id }}' {% else %} undefined {% endif %}
                        });
                    </script>
                {% endcompress %}
            {% endif %}
        {% endif %}
        {% block head_scripts %}{% endblock %}
    </head>
    <body class="bg-light">
        <div id="particles"></div>
        {% block main %}{% block content %}{% endblock %}{% endblock %}
        {% block vue_templates %}{% endblock %}
        {% compress js file bootstrap %}
            <script src="{% static 'vendor/jquery@3.3.1/jquery.min.js' %}"></script>
            <script src="{% static 'vendor/popper.js@1.14.3/popper.min.js' %}"></script>
            <script src="{% static 'vendor/bootstrap@4.1.3/bootstrap.min.js' %}"></script>
        {% endcompress %}
        {% compress js file helpers %}
            <script src="{% static 'vendor/marked@0.5.0/marked.js' %}"></script>
            <script src="{% static 'vendor/moment@2.22.2/moment.min.js' %}"></script>
            <script src="{% static 'vendor/underscore@1.9.1/underscore.min.js' %}"></script>
            <script src="{% static 'vendor/es6-promise@4.2.4/es6-promise.auto.min.js' %}"></script>
            <script src="{% static 'js/__init__.js' %}"></script>
        {% endcompress %}
        {% compress js file vue %}
            {% if debug %}
                <script src="{% static 'vendor/vue@2.5.17/vue.js' %}"></script>
                <script src="{% static 'vendor/vuex@3.0.1/vuex.js' %}"></script>
                <script src="{% static 'vendor/vue-router@3.0.1/vue-router.js' %}"></script>
            {% else %}
                <script src="{% static 'vendor/vue@2.5.17/vue.min.js' %}"></script>
                <script src="{% static 'vendor/vuex@3.0.1/vuex.min.js' %}"></script>
                <script src="{% static 'vendor/vue-router@3.0.1/vue-router.min.js' %}"></script>
                <script src="{% static 'vendor/vue-raven@3.24.1/raven.min.js' %}"></script>
                <script src="{% static 'js/sentry.js' %}"></script>
            {%endif %}
            <script src="{% static 'js/ajax.js' %}"></script>
            <script src="{% static 'js/helpers.js' %}"></script>
            <script src="{% static 'js/mappers.js' %}"></script>
            <script src="{% static 'js/v-shared.js' %}"></script>
            <script src="{% static 'js/components/v-lists.js' %}"></script>
        {% endcompress %}
        {% block extra_scripts %}{% endblock %}
        {% block scripts %}{% endblock %}
        {% compress js file particles %}
            <script src="{% static 'vendor/particles@2.0.0/particles.min.js' %}"></script>
            <script>
                if (!isSmallDevice() && !isIE()) {
                    particlesJS('particles', {
                        "particles": {
                            "number": {
                                "value": 200,
                                "density": {
                                    "enable": true,
                                    "value_area": 800
                                }
                            },
                            "color": {
                                "value": "#ccc"
                            },
                            "shape": {
                                "type": "circle",
                                "stroke": {
                                    "width": 0,
                                    "color": "#ccc"
                                },
                                "polygon": {
                                    "nb_sides": 6
                                }
                            },
                            "opacity": {
                                "value": 0.5,
                                "random": false,
                                "anim": {
                                    "enable": false,
                                    "speed": 1,
                                    "opacity_min": 0.1,
                                    "sync": false
                                }
                            },
                            "size": {
                                "value": 3,
                                "random": true,
                                "anim": {
                                    "enable": false,
                                    "speed": 40,
                                    "size_min": 0.1,
                                    "sync": false
                                }
                            },
                            "line_linked": {
                                "enable": true,
                                "distance": 150,
                                "color": "#ddd",
                                "opacity": 0.4,
                                "width": 1
                            },
                            "move": {
                                "enable": false,
                                "speed": 5,
                                "direction": "none",
                                "random": false,
                                "straight": false,
                                "out_mode": "out",
                                "bounce": false,
                                "attract": {
                                    "enable": false,
                                    "rotateX": 600,
                                    "rotateY": 1200
                                }
                            }
                        },
                        "retina_detect": true
                    });
                }
            </script>
        {% endcompress %}
    </body>
</html>
